Deny From 41.66.41.106
Deny From 141.8.147.14

# baidu spider
#Deny From 180.76.5
Deny From 139.18.38.221
Deny From 41.207.203.181

Deny From 2.49.206.84
Deny From 14.212.130.200

# this bot is distributed and f***ing aggressive
RewriteCond %{HTTP_USER_AGENT} 80legs
RewriteRule ^.*$ - [F]

# Prevent click-jacking http://forge.typo3.org/issues/54837
Header add X-Frame-Options "SAMEORIGIN"

# Expire headers
# Source: http://www.vtek.nl/solution-for-slow-redmine-performance/
### TODO: Turn this on after migration is completed
ExpiresActive On
<FilesMatch "\.(js|css|jpg|jpeg|gif|png)$">
	ExpiresDefault "access plus 1 day"
</FilesMatch>

# General Apache options
<IfModule mod_fastcgi.c>
	AddHandler fastcgi-script .fcgi
</IfModule>
<IfModule mod_fcgid.c>
	AddHandler fcgid-script .fcgi
</IfModule>
<IfModule mod_cgi.c>
	AddHandler cgi-script .cgi
</IfModule>
Options +FollowSymLinks +ExecCGI

# If you don't want Rails to look in certain directories,
# use the following rewrite rules so that Apache won't rewrite certain requests
# 
# Example:
#   RewriteCond %{REQUEST_URI} ^/notrails.*
#   RewriteRule .* - [L]

# Redirect all requests not available on the filesystem to Rails
# By default the cgi dispatcher is used which is very slow
# 
# For better performance replace the dispatcher with the fastcgi one
#
# Example:
#   RewriteRule ^(.*)$ dispatch.fcgi [QSA,L]
RewriteEngine On

# Skip rewriting in /scripts/
RewriteRule ^scripts/ - [L]

RewriteRule ^projects/(show/)(.*)$	/projects/$2 [R=301,L]

# Redirect old (renamed) project URLs
RewriteRule ^projects/team-infrastructure(.*)$			/projects/team-server-public$1			[R=301,L]
RewriteRule ^projects/team-t3o-relaunch-week(|/.*)$		/projects/team-t3o$1				[R=301,L]
RewriteRule ^projects/typo3-v5-core(|/.*)$			/projects/typo3neos-team$1			[R=301,L]
RewriteRule ^projects/typo3-v5(|/.*)$				/projects/typo3neos$1				[R=301,L]
RewriteRule ^projects/typo3v4(|/.*)$				/projects/typo3-cms$1				[R=301,L]
RewriteRule ^projects/typo3v4-core(|/.*)$			/projects/typo3cms-core$1			[R=301,L]
RewriteRule ^projects/typo3v4-coreteam(|/.*)$			/projects/typo3cms-team$1			[R=301,L]
RewriteRule ^projects/typo3v4-documentation(|/.*)$		/projects/typo3cms-documentation$1		[R=301,L]
RewriteRule ^projects/typo3v4-doc_guide_extbase(|/.*)$		/projects/typo3cms-doc-extbase$1		[R=301,L]
RewriteRule ^projects/typo3v4-doc_core_fal(|/.*)$		/projects/typo3cms-doc-file-abstraction-layer$1	[R=301,L]
RewriteRule ^projects/typo3v4-doc_tut_quickstart(|/.*)$		/projects/typo3cms-doc-getting-started$1	[R=301,L]
RewriteRule ^projects/typo3v4-doc_tut_quickstart_nl(|/.*)$	/projects/typo3cms-doc-getting-started-nl$1	[R=301,L]
RewriteRule ^projects/typo3v4-doc_guide_install(|/.*)$		/projects/typo3cms-doc-installation$1		[R=301,L]
RewriteRule ^projects/typo3v4-doc_guide_l10n(|/.*)$		/projects/typo3cms-doc-frontend-localization$1	[R=301,L]
RewriteRule ^projects/typo3v4-doc_guide_maintenance(|/.*)$	/projects/typo3cms-doc-maintenance$1		[R=301,L]
RewriteRule ^projects/typo3v4-official_extension_template(|/.*)$ /projects/typo3cms-doc-official-extension-template$1 [R=301,L]
RewriteRule ^projects/typo3v4-official_template(|/.*)$		/projects/typo3cms-doc-official-template$1	[R=301,L]
RewriteRule ^projects/typo3v4-doc_guide_security(|/.*)$		/projects/typo3cms-doc-security$1		[R=301,L]
RewriteRule ^projects/typo3v4-doc_guide_security_nl(|/.*)$	/projects/typo3cms-doc-security-nl$1		[R=301,L]
RewriteRule ^projects/typo3v4-doc_core_tca(|/.*)$		/projects/typo3cms-doc-tca$1			[R=301,L]
RewriteRule ^projects/typo3cms-doc_tut_templating_nl(|/.*)$	/projects/typo3cms-doc-templating-nl$1		[R=301,L]
RewriteRule ^projects/typo3v4-doc_tut_templating(|/.*)$		/projects/typo3cms-doc-templating$1		[R=301,L]
RewriteRule ^projects/typo3v4-doc_core_skinning(|/.*)$		/projects/typo3cms-doc-skinning$1		[R=301,L]
RewriteRule ^projects/typo3v4-typo3_editor_tutorial(|/.*)$	/projects/typo3cms-doc-editors$1		[R=301,L]
RewriteRule ^projects/typo3cms-typo3_editor_tutorial_nl(|/.*)$	/projects/typo3cms-doc-editors-nl$1		[R=301,L]
RewriteRule ^projects/typo3v4-doc_tut_ts45(|/.*)$		/projects/typo3cms-doc-typoscript-45-minutes$1	[R=301,L]
RewriteRule ^projects/typo3v4-doc_core_api(|/.*)$		/projects/typo3cms-doc-core-api$1		[R=301,L]
RewriteRule ^projects/typo3v4-doc_core_cgl(|/.*)$		/projects/typo3cms-doc-coding-guidelines$1	[R=301,L]
RewriteRule ^projects/typo3v4-doc_core_inside(|/.*)$		/projects/typo3cms-doc-inside-typo3$1		[R=301,L]
RewriteRule ^projects/typo3v4-doc_core_services(|/.*)$		/projects/typo3cms-doc-typo3-services$1		[R=301,L]
RewriteRule ^projects/typo3v4-doc_core_ts(|/.*)$		/projects/typo3cms-doc-typoscript-syntax$1	[R=301,L]
RewriteRule ^projects/typo3v4-doc_core_tsconfig(|/.*)$		/projects/typo3cms-doc-tsconfig$1		[R=301,L]
RewriteRule ^projects/typo3v4-doc_core_tsref(|/.*)$		/projects/typo3cms-doc-typoscript$1		[R=301,L]
RewriteRule ^projects/package-typo3-flow3(|/.*)$		/projects/package-typo3-flow$1			[R=301,L]
RewriteRule ^projects/package-typo3-typo3(|/.*)$		/projects/package-typo3-neos$1			[R=301,L]
RewriteRule ^projects/package-typo3-neos-contenttypes(|/.*)$	/projects/package-typo3-neos-nodetypes$1	[R=301,L]
RewriteRule ^projects/package-twitter-bootstrap(|/.*)$		/projects/package-typo3-twitter-bootstrap$1	[R=301,L]
RewriteRule ^projects/package-imagine(|/.*)$			/projects/package-typo3-imagine$1		[R=301,L]


# If your Rails application is accessed via an Alias directive,
# then you MUST also set the RewriteBase in this htaccess file.
#
# Example:
#   Alias /myrailsapp /path/to/myrailsapp/public
#   RewriteBase /myrailsapp

RewriteRule ^$ index.html [QSA]
RewriteRule ^([^.]+)$ $1.html [QSA]
RewriteCond %{REQUEST_FILENAME} !-f
<IfModule mod_fastcgi.c>
	RewriteRule ^(.*)$ dispatch.fcgi [E=X-HTTP_AUTHORIZATION:%{HTTP:Authorization},QSA,L]
</IfModule>
<IfModule mod_fcgid.c>
	RewriteRule ^(.*)$ dispatch.fcgi [E=X-HTTP_AUTHORIZATION:%{HTTP:Authorization},QSA,L]
</IfModule>
<IfModule mod_cgi.c>
	RewriteRule ^(.*)$ dispatch.cgi [E=X-HTTP_AUTHORIZATION:%{HTTP:Authorization},QSA,L]
</IfModule>

# In case Rails experiences terminal errors
# Instead of displaying this message you can supply a file here which will be rendered instead
# 
# Example:
#   ErrorDocument 500 /500.html

ErrorDocument 500 "<h2>Application error</h2>Rails application failed to start properly"
